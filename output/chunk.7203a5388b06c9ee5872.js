(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{2756:function(e,t,r){"use strict";r.r(t);var n=r(3),o=r.n(n),i=r(1),a=r.n(i),s=r(4),c=r(7),l=r(29),u=r(2),p=r(0),d=function(e){var t,r,n=e.platform;return Object(p.jsxs)("div",{id:"platform-info",children:[Object(p.jsx)(u.sb,{children:Object(p.jsx)(u.k,{xs:12,children:Object(p.jsx)("div",{children:Object(p.jsx)(u.D,{size:"xx-large",tag:"h2",children:null==n?void 0:n.name})})})}),Object(p.jsxs)(u.sb,{children:[Object(p.jsx)(u.k,{xs:3,children:Object(p.jsx)(u.J,{label:Object(p.jsx)(l.a,{id:"ui-agreements.platform.localPlatformCode"}),children:Object(p.jsx)("div",{children:null!==(t=null==n?void 0:n.localCode)&&void 0!==t?t:Object(p.jsx)(u.bb,{})})})}),Object(p.jsx)(u.k,{xs:3,children:Object(p.jsx)(u.J,{label:Object(p.jsx)(l.a,{id:"ui-agreements.platform.locators"}),children:Object(p.jsx)("div",{children:null!=n&&null!==(r=n.locators)&&void 0!==r&&r.length?null==n?void 0:n.locators.map((function(e){return Object(p.jsx)("div",{children:null==e?void 0:e.domainName})})):Object(p.jsx)(u.bb,{})})})})]})]})};d.propTypes={platform:a.a.shape({localCode:a.a.string,locators:a.a.arrayOf(a.a.object),name:a.a.string}).isRequired};var f=d,m=r(415),b=function(e){var t,r,n,o=e.platform.id,i=e.stringTemplates,a=void 0===i?[]:i,s=e.id,d=e.handlers.onViewUrlCustomizer,f=null!==(t=null==a?void 0:a.urlCustomisers)&&void 0!==t?t:[],b={name:Object(p.jsx)(l.a,{id:"ui-agreements.platform.urlCustomization.name"}),customizationCode:Object(p.jsx)(l.a,{id:"ui-agreements.platform.urlCustomization.customizationCode"})};return Object(p.jsx)(u.a,{displayWhenClosed:(n=null!==(r=null==f?void 0:f.length)&&void 0!==r?r:0,void 0!==n?Object(p.jsx)(u.e,{children:n}):Object(p.jsx)(u.xb,{})),displayWhenOpen:Object(p.jsx)(c.f,{perm:"ui-agreements.platforms.edit",children:(null==f?void 0:f.length)>0?Object(p.jsx)(u.Cb,{id:"add-url-customization-button-tooltip",placement:"top",text:Object(p.jsx)(l.a,{id:"ui-agreements.platform.addUrlCustomization.maxNumber"}),children:function(e){var t=e.ref,r=e.ariaIds;return Object(p.jsx)("div",{ref:t,"aria-labelledby":r.text,children:Object(p.jsx)(u.f,{disabled:!0,id:"add-url-customization-button",children:Object(p.jsx)(l.a,{id:"ui-agreements.platform.addUrlCustomization"})})})}}):Object(p.jsx)(u.f,{id:"add-url-customization-button",to:m.h.urlCustomizerCreate(o),children:Object(p.jsx)(l.a,{id:"ui-agreements.platform.addUrlCustomization"})})}),id:s,label:Object(p.jsx)(l.a,{id:"ui-agreements.platform.urlCustomizationSettings"}),children:Object(p.jsx)(u.W,{columnMapping:b,columnWidths:{name:250},contentData:f,formatter:{name:function(e){return e.name},customizationCode:function(e){return e.rule}},id:"url-customization",isEmptyMessage:Object(p.jsx)(l.a,{id:"ui-agreements.platform.noUrlCustomization"}),onRowClick:function(e,t){"A"!==e.target.tagName&&d(t.id)},visibleColumns:["name","customizationCode"]})})};b.propTypes={handlers:a.a.shape({onViewUrlCustomizer:a.a.func}),id:a.a.string,platform:a.a.shape({id:a.a.string}),stringTemplates:a.a.arrayOf(a.a.object)};var j=b,h=function(e){var t=e.platform,r=t.id,n=t.name,o=e.proxyServers,i=void 0===o?[]:o,a=e.id,s=e.handlers.onClickProxyServerAction,c={name:Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.name"}),status:Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.status"}),actions:Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.actions"})},d={name:function(e){return e.name},status:function(e){return e.idScopes.includes(r)?Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.notUsed"}):Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.used"})},actions:function(e){var t=e.name,o=e.idScopes.includes(r);return Object(p.jsx)(u.Cb,{id:"proxy-server-action-button-tooltip",placement:"top",text:o?Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.useProxyTooltip",values:{proxyName:t,platformName:n}}):Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.doNotUseProxyTooltip",values:{proxyName:t,platformName:n}}),children:function(t){var n=t.ref,i=t.ariaIds;return Object(p.jsx)("div",{ref:n,"aria-labelledby":i.text,children:Object(p.jsx)(u.f,{buttonStyle:o?"primary":"default",marginBottom0:!0,onClick:function(){return s(e,r,o)},children:o?Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.useThisProxy"}):Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxySettings.doNotUseThisProxy"})})})}})}};return Object(p.jsx)(u.a,{id:a,label:Object(p.jsx)(l.a,{id:"ui-agreements.platform.platformProxyServerSettings"}),children:Object(p.jsx)(u.W,{columnMapping:c,columnWidths:{name:250,status:250},contentData:i,formatter:d,id:"url-customization",interactive:!1,isEmptyMessage:Object(p.jsx)(l.a,{id:"ui-agreements.platform.noplatformProxyServer"}),visibleColumns:["name","status","actions"]})})};h.propTypes={id:a.a.string,handlers:a.a.shape({onClickProxyServerAction:a.a.func}),platform:a.a.shape({id:a.a.string,name:a.a.string}).isRequired,proxyServers:a.a.arrayOf(a.a.shape({idScopes:a.a.arrayOf(a.a.string)}))};var y=h;function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){var t=e.data,r=t.platform,o=t.stringTemplates,i=t.proxyServers,a=e.isLoading,s=e.handlers,d=Object(c.s)(),m={defaultWidth:"55%",dismissible:!0,id:"pane-view-platform",onClose:s.onClose},b=Object(n.useRef)(null);if(a)return Object(p.jsx)(u.Q,x({"data-loading":!0},m));var h=function(e){return{id:e,platform:r,handlers:s,stringTemplates:o,proxyServers:i}},O=[{name:"edit",handler:s.onEdit},{name:"expandAllSections",handler:function(e){return Object(u.Jb)(e,b)}},{name:"collapseAllSections",handler:function(e){return Object(u.Eb)(e,b)}}];return Object(p.jsx)(u.C,{commands:O,isWithinScope:u.Db,scope:document.body,children:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(u.db,x(x({actionMenu:function(){return d.hasPerm("ui-agreements.platforms.edit")?Object(p.jsx)(u.f,{buttonStyle:"dropdownItem",id:"clickable-dropdown-edit-platform",onClick:s.onEdit,children:Object(p.jsx)(u.G,{icon:"edit",children:Object(p.jsx)(l.a,{id:"ui-agreements.platform.edit"})})}):null},appIcon:Object(p.jsx)(c.b,{app:"agreements",iconKey:"platform"}),paneTitle:null==r?void 0:r.name},m),{},{children:Object(p.jsxs)(c.k,{record:null==r?void 0:r.name,children:[Object(p.jsx)(f,x({},h("platformInfo"))),Object(p.jsxs)(u.c,{ref:b,children:[Object(p.jsx)(u.sb,{end:"xs",children:Object(p.jsx)(u.k,{xs:!0,children:Object(p.jsx)(u.v,{})})}),Object(p.jsxs)(u.b,{initialStatus:{platformUrlCustomization:!1,platformProxySettings:!1},children:[Object(p.jsx)(j,x({},h("platformUrlCustomization"))),Object(p.jsx)(y,x({},h("platformProxySettings")))]})]})]})}))})})};g.propTypes={data:a.a.shape({platform:a.a.object.isRequired,proxyServers:a.a.arrayOf(a.a.object),stringTemplates:a.a.object,searchString:a.a.string}).isRequired,handlers:a.a.shape({onClose:a.a.func.isRequired,onEdit:a.a.func}).isRequired,isLoading:a.a.bool.isRequired};var S=g;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(i,e);var t,r,n,o=q(i);function i(){var e;T(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).handleClose=function(){e.props.history.push("".concat(m.h.platforms()).concat(e.props.location.search))},e.handleEdit=function(){var t=e.props,r=t.history,n=t.location,o=t.match;r.push("".concat(m.h.platformEdit(o.params.id)).concat(n.search))},e.handleEResourceClick=function(t){e.props.history.push("".concat(m.h.eresourceView(t)).concat(e.props.location.search))},e.handleViewUrlCustomizer=function(t){var r=e.props,n=r.history,o=r.location,i=r.match;n.push("".concat(m.h.urlCustomizerView(i.params.id,t)).concat(o.search))},e.handleClickProxyServerAction=function(t,r,n){var o=e.props.mutator.proxyServers,i=t.idScopes,a=void 0===i?[]:i,c=n?a.filter((function(e){return""!==e&&e!==r})):[].concat(R(a.filter((function(e){return""!==e}))),[r]),l=w(w(w({},t),{idScopes:Object(s.isEmpty)(c)?[""]:c}),{},{context:"urlProxier"});return o.PUT(l)},e.isLoading=function(){var t,r,n,o,i,a=e.props,s=a.match,c=a.resources;return s.params.id!==(null==c||null===(t=c.platform)||void 0===t||null===(r=t.records)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id)&&(null===(o=null==c||null===(i=c.platform)||void 0===i?void 0:i.isPending)||void 0===o||o)},e.getRecords=function(t){return Object(s.get)(e.props.resources,"".concat(t,".isPending"),!0)?void 0:Object(s.get)(e.props.resources,"".concat(t,".records"))},e}return t=i,(r=[{key:"render",value:function(){var e,t,r,n,o,i,a,s=this.props.resources;return Object(p.jsx)(S,{data:{platform:null!==(e=null==s||null===(t=s.platform)||void 0===t||null===(r=t.records)||void 0===r?void 0:r[0])&&void 0!==e?e:{},stringTemplates:null!==(n=null==s||null===(o=s.stringTemplates)||void 0===o?void 0:o.records[0])&&void 0!==n?n:[],proxyServers:null!==(i=null==s||null===(a=s.proxyServers)||void 0===a?void 0:a.records)&&void 0!==i?i:[]},handlers:{onClose:this.handleClose,onEdit:this.handleEdit,onViewUrlCustomizer:this.handleViewUrlCustomizer,onClickProxyServerAction:this.handleClickProxyServerAction},isLoading:this.isLoading()})}}])&&E(t.prototype,r),n&&E(t,n),i}(o.a.Component);N.manifest=Object.freeze({platform:{type:"okapi",path:"erm/platforms/:{id}"},stringTemplates:{type:"okapi",path:"erm/sts/template/:{id}",clientGeneratePk:!1,throwErrors:!1},proxyServers:{type:"okapi",path:"erm/sts",params:{filters:"context.value=urlproxier"},throwErrors:!1}}),N.propTypes={history:a.a.shape({push:a.a.func.isRequired}).isRequired,location:a.a.shape({search:a.a.string.isRequired}).isRequired,match:a.a.shape({params:a.a.shape({id:a.a.string.isRequired}).isRequired}).isRequired,mutator:a.a.shape({proxyServers:a.a.shape({PUT:a.a.func.isRequired})}),resources:a.a.shape({platform:a.a.object,proxyServers:a.a.arrayOf(a.a.object),stringTemplates:a.a.object}).isRequired};t.default=Object(c.o)(N)}}]);