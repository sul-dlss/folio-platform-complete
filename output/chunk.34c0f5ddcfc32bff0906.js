(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{2757:function(e,t,r){"use strict";r.r(t);var n=r(3),o=r.n(n),i=r(1),s=r.n(i),c=r(4),a=r(142),u=r.n(a),l=r(7),p=r(9),f=r(2948),d=r(237),b=r(29),j=r(2),h=r(2980),y=r(415),O=r(0);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var o=R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(s,e);var t,r,n,i=P(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).getSectionProps=function(e){var r=t.props,n=r.data,o=r.handlers;return{eresource:n.eresource,data:n,id:e,handlers:o}},t.getInitialAccordionsState=function(){return{eresourceAgreements:!1,notes:!1,packageContents:!1}},t.accordionStatusRef=o.a.createRef(),t}return t=s,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.handlers,o=[{name:"expandAllSections",handler:function(t){return Object(j.Jb)(t,e.accordionStatusRef)}},{name:"collapseAllSections",handler:function(t){return Object(j.Eb)(t,e.accordionStatusRef)}}];return Object(O.jsx)(j.C,{commands:o,isWithinScope:j.Db,scope:document.body,children:Object(O.jsxs)("div",{id:"eresource-package",children:[Object(O.jsx)(h.h,v({},this.getSectionProps("info"))),Object(O.jsxs)(j.c,{ref:this.accordionStatusRef,children:[Object(O.jsx)(j.sb,{end:"xs",children:Object(O.jsx)(j.k,{xs:!0,children:Object(O.jsx)(j.v,{})})}),Object(O.jsxs)(j.b,{initialStatus:this.getInitialAccordionsState(),children:[Object(O.jsx)(h.b,v(v({},this.getSectionProps("eresourceAgreements")),{},{isEmptyMessage:Object(O.jsx)(b.a,{id:"ui-agreements.emptyAccordion.noAgreementsPackage"}),visibleColumns:["name","type","startDate","endDate"]})),Object(O.jsx)(h.g,v(v({},this.getSectionProps("packageContents")),{},{onFilterPackageContents:n.onFilterPackageContents,onNeedMorePackageContents:n.onNeedMorePackageContents})),Object(O.jsx)(p.x,v(v({},this.getSectionProps("notes")),{},{domainName:"agreements",entityId:r.eresource.id,entityName:r.eresource.name,entityType:"eresource",pathToNoteCreate:y.h.noteCreate(),pathToNoteDetails:y.h.notes()}))]})]})]})})}}])&&S(t.prototype,r),n&&S(t,n),s}(o.a.Component);w.propTypes={data:s.a.object,handlers:s.a.object};var E=r(2981),T=r(2978);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(s,e);var t,r,n,i=I(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).getSectionProps=function(e){var r=t.props,n=r.data,o=r.handlers;return{eresource:n.eresource,data:n,id:e,handlers:o}},t.getInitialAccordionsState=function(){return{acquisitionOptions:!1,eresourceAgreements:!1,notes:!1,discoverySettings:!1}},t.renderTitleInfo=function(e){return Object(O.jsxs)("div",{id:"title-info",children:[Object(O.jsx)(j.D,{margin:"small",size:"xx-large",tag:"h2",children:e.name}),Object(O.jsx)(T.a,q(q({},t.getSectionProps("info")),{},{title:e}))]})},t.accordionStatusRef=o.a.createRef(),t}return t=s,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.handlers,o=[{name:"edit",handler:n.onEdit},{name:"expandAllSections",handler:function(t){return Object(j.Jb)(t,e.accordionStatusRef)}},{name:"collapseAllSections",handler:function(t){return Object(j.Eb)(t,e.accordionStatusRef)}}];return Object(O.jsx)(j.C,{commands:o,isWithinScope:j.Db,scope:document.body,children:Object(O.jsxs)("div",{id:"eresource-title",children:[this.renderTitleInfo(r.eresource),Object(O.jsxs)(j.c,{ref:this.accordionStatusRef,children:[Object(O.jsx)(j.sb,{end:"xs",children:Object(O.jsx)(j.k,{xs:!0,children:Object(O.jsx)(j.v,{})})}),Object(O.jsxs)(j.b,{initialStatus:this.getInitialAccordionsState(),children:[Object(O.jsx)(h.b,q(q({},this.getSectionProps("eresourceAgreements")),{},{isEmptyMessage:Object(O.jsx)(b.a,{id:"ui-agreements.emptyAccordion.noAgreementsEresource"}),visibleColumns:["name","type","startDate","endDate","eresource","acqMethod","coverage","isCustomCoverage"]})),Object(O.jsx)(h.a,q({},this.getSectionProps("acquisitionOptions"))),Object(O.jsx)(p.x,q(q({},this.getSectionProps("notes")),{},{domainName:"agreements",entityId:r.eresource.id,entityName:r.eresource.name,entityType:"eresource",pathToNoteCreate:y.h.noteCreate(),pathToNoteDetails:y.h.notes()})),n.isSuppressFromDiscoveryEnabled("title")&&Object(O.jsx)(E.a,{handlers:n,id:"discoverySettings",title:r})]})]})]})})}}])&&F(t.prototype,r),n&&F(t,n),s}(o.a.Component);J.propTypes={data:s.a.object,handlers:s.a.object};var B=r(2982),z=r(2983);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var o=G(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return K(this,r)}}function K(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(s,e);var t,r,n,i=W(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).getInitialAccordionsState=function(){return{"pci-coverage":!1,eresourceAgreements:!1,discoverySettings:!1}},t.accordionStatusRef=o.a.createRef(),t}return t=s,(r=[{key:"render",value:function(){var e,t=this,r=this.props,n=r.data,o=r.handlers,i=n.eresource,s=n.searchString,c=[{name:"edit",handler:o.onEdit},{name:"expandAllSections",handler:function(e){return Object(j.Jb)(e,t.accordionStatusRef)}},{name:"collapseAllSections",handler:function(e){return Object(j.Eb)(e,t.accordionStatusRef)}}];return Object(O.jsx)(j.C,{commands:c,isWithinScope:j.Db,scope:document.body,children:Object(O.jsxs)("div",{id:"eresource-pci",children:[Object(O.jsx)(h.f,{pci:i}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.D,{margin:"small",size:"large",tag:"h3",children:Object(O.jsx)(b.a,{id:"ui-agreements.eresources.parentPackageDetails"})}),Object(O.jsx)(B.a,{pkg:null!==(e=null==i?void 0:i.pkg)&&void 0!==e?e:{},searchString:s})]}),Object(O.jsxs)("div",{id:"title-info",children:[Object(O.jsx)(j.D,{margin:"small",size:"large",tag:"h3",children:Object(O.jsx)(b.a,{id:"ui-agreements.eresources.titleDetails"})}),Object(O.jsx)(z.a,{searchString:s,title:n.eresource})]}),Object(O.jsxs)(j.c,{ref:this.accordionStatusRef,children:[Object(O.jsx)(j.sb,{end:"xs",children:Object(O.jsx)(j.k,{xs:!0,children:Object(O.jsx)(j.v,{})})}),Object(O.jsxs)(j.b,{initialStatus:this.getInitialAccordionsState(),children:[Object(O.jsx)(h.c,{data:n}),Object(O.jsx)(h.b,{data:n,handlers:o,headline:i.name,id:"eresourceAgreements",renderRelatedEntitlements:!0,visibleColumns:["name","type","startDate","endDate"]}),(o.isSuppressFromDiscoveryEnabled("pci")||o.isSuppressFromDiscoveryEnabled("title"))&&Object(O.jsx)(E.a,{handlers:o,id:"discoverySettings",pci:i})]})]})]})})}}])&&V(t.prototype,r),n&&V(t,n),s}(o.a.Component);Q.propTypes={data:s.a.shape({entitlements:s.a.arrayOf(s.a.object),eresource:s.a.shape({id:s.a.string,name:s.a.string,pkg:s.a.object,status:s.a.shape({label:s.a.string})}).isRequired,relatedEntitlements:s.a.arrayOf(s.a.object),searchString:s.a.string,settings:s.a.object}),handlers:s.a.shape({isSuppressFromDiscoveryEnabled:s.a.func.isRequired,onEdit:s.a.func.isRequired,onNeedMoreEntitlements:s.a.func.isRequired})};var X=r(416);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee={data:s.a.shape({eresource:s.a.shape({class:s.a.string,name:s.a.string,tags:s.a.arrayOf(s.a.string),type:s.a.object})}),handlers:s.a.shape({onClose:s.a.func.isRequired,onEdit:s.a.func.isRequired,onToggleTags:s.a.func.isRequired}).isRequired,helperApp:s.a.func,isLoading:s.a.bool},te=function(e){var t,r,n=e.data,o=void 0===n?{}:n,i=e.data.eresource,s=e.helperApp,c=e.handlers,a=e.isLoading,u=Object(d.a)(),p={defaultWidth:"55%",dismissible:!0,onClose:c.onClose};if(a)return Object(O.jsx)(j.Q,Z({"data-loading":!0,id:"pane-view-eresource"},p));var f=w;return i.class===X.f.TITLEINSTANCE?f=J:i.class===X.f.PCI&&(f=Q),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.db,Z(Z({appIcon:Object(O.jsx)(l.b,{app:"agreements",iconKey:"eresource",size:"small"}),id:"pane-view-eresource",lastMenu:i.class===X.f.PCI||i.class===X.f.TITLEINSTANCE?Object(O.jsx)(l.f,{perm:"ui-agreements.resources.edit",children:Object(O.jsxs)(j.jb,{children:[c.onToggleTags&&Object(O.jsx)(j.H,{ariaLabel:u.formatMessage({id:"ui-agreements.agreements.showTags"}),badgeCount:null!==(t=null==i||null===(r=i.tags)||void 0===r?void 0:r.length)&&void 0!==t?t:0,icon:"tag",id:"clickable-show-tags",onClick:c.onToggleTags}),Object(O.jsx)(j.f,{buttonStyle:"primary",id:"clickable-edit-eresource",marginBottom0:!0,onClick:c.onEdit,children:Object(O.jsx)(b.a,{id:"stripes-components.button.edit"})})]})}):null,onClose:c.onClose,paneTitle:i.name},p),{},{children:Object(O.jsx)(l.k,{record:i.name,children:Object(O.jsx)(f,{data:o,handlers:c})})})),s(i)]})};te.propTypes=ee;var re=te;function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fe(e);if(t){var o=fe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(i,e);var t,r,n,o=le(i);function i(){var e;ce(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).getHelperApp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.props,n=r.match,o=r.resources,i=o.query.helper;if(!i)return null;var s,c=null;return"tags"===i&&(c=f.a),c?(t.class===X.f.TITLEINSTANCE?s="titles":t.class===X.f.PCI&&(s="pci"),Object(O.jsx)(c,{link:"erm/".concat(s,"/").concat(n.params.id),onToggle:function(){return e.handleToggleHelper(i)}})):null},e.handleClose=function(){e.props.history.push("".concat(y.h.eresources()).concat(e.props.location.search))},e.handleEdit=function(){var t=e.props,r=t.history,n=t.location,o=t.match;r.push("".concat(y.h.eresourceEdit(o.params.id)).concat(n.search))},e.handleEResourceClick=function(t){e.props.history.push("".concat(y.h.eresourceView(t)).concat(e.props.location.search))},e.handleFilterPackageContents=function(t){var r=e.props.mutator;r.packageContentsFilter.replace(t),r.packageContentsOffset.replace(0)},e.handleNeedMoreEntitlements=function(t,r){e.props.mutator.entitlementsOffset.replace(r)},e.handleNeedMoreEntitlementOptions=function(t,r){e.props.mutator.entitlementOptionsOffset.replace(r)},e.handleNeedMorePackageContents=function(t,r){e.props.mutator.packageContentsOffset.replace(r)},e.handleToggleHelper=function(t){var r=e.props,n=r.mutator,o=r.resources.query.helper!==t?t:null;n.query.update({helper:o})},e.handleToggleTags=function(){e.handleToggleHelper("tags")},e.isLoading=function(){var t=e.props,r=t.match,n=t.resources;return r.params.id!==Object(c.get)(n,"eresource.records[0].id")&&Object(c.get)(n,"eresource.isPending",!0)},e.getPackageContentsRecords=function(){var t,r=e.props,n=r.resources,o=r.match,i=Object(c.get)(n,"packageContents.url","");return-1===i.indexOf("".concat(o.params.id))||-1===i.indexOf("content/".concat(n.packageContentsFilter))||null==n||null===(t=n.packageContents)||void 0===t?void 0:t.records},e.getRecords=function(t){return Object(c.get)(e.props.resources,"".concat(t,".isPending"),!0)?void 0:Object(c.get)(e.props.resources,"".concat(t,".records"))},e}return t=i,(r=[{key:"componentDidUpdate",value:function(e){var t,r,n,o,i,s,a,u,l,p=this.props,f=p.mutator,d=p.resources,b=Object(c.get)(d,"entitlements.other.totalRecords",100);b>d.entitlementsCount&&f.entitlementsCount.replace(b),(null==e||null===(t=e.resources)||void 0===t||null===(r=t.eresource)||void 0===r||null===(n=r.records)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.id)!==(null===(i=this.props)||void 0===i||null===(s=i.resources)||void 0===s||null===(a=s.eresource)||void 0===a||null===(u=a.records)||void 0===u||null===(l=u[0])||void 0===l?void 0:l.id)&&(f.entitlementsOffset.replace(0),f.entitlementOptionsOffset.replace(0),f.packageContentsOffset.replace(0))}},{key:"getPackageContentsRecordsCount",value:function(){return this.getPackageContentsRecords()?Object(c.get)(this.props.resources,"packageContents.other.totalRecords",0):0}},{key:"render",value:function(){var e,t,r,n,o,i,s,a,u,l=this,p=this.props,f=p.handlers,d=p.isSuppressFromDiscoveryEnabled,b=p.resources,j=p.tagsEnabled;return Object(O.jsx)(re,{data:{eresource:null!==(e=null==b||null===(t=b.eresource)||void 0===t||null===(r=t.records)||void 0===r?void 0:r[0])&&void 0!==e?e:{},entitlementOptions:this.getRecords("entitlementOptions"),entitlementOptionsCount:null!==(n=null==b||null===(o=b.entitlementOptions)||void 0===o||null===(i=o.other)||void 0===i?void 0:i.totalRecords)&&void 0!==n?n:0,entitlements:this.getRecords("entitlements"),entitlementsCount:null!==(s=null==b||null===(a=b.entitlements)||void 0===a||null===(u=a.other)||void 0===u?void 0:u.totalRecords)&&void 0!==s?s:0,packageContentsFilter:this.props.resources.packageContentsFilter,packageContents:this.getPackageContentsRecords(),packageContentsCount:this.getPackageContentsRecordsCount(),relatedEntitlements:this.getRecords("relatedEntitlements"),searchString:this.props.location.search},handlers:ie(ie({},f),{},{isSuppressFromDiscoveryEnabled:d,onFilterPackageContents:this.handleFilterPackageContents,onNeedMoreEntitlements:this.handleNeedMoreEntitlements,onNeedMoreEntitlementOptions:this.handleNeedMoreEntitlementOptions,onNeedMorePackageContents:this.handleNeedMorePackageContents,onClose:this.handleClose,onEdit:this.handleEdit,onEResourceClick:this.handleEResourceClick,onToggleTags:j?this.handleToggleTags:void 0}),helperApp:function(e){return l.getHelperApp(e)},isLoading:this.isLoading()},Object(c.get)(b,"eresource.loadedAt","loading"))}}])&&ae(t.prototype,r),n&&ae(t,n),i}(o.a.Component);de.manifest=Object.freeze({eresource:{type:"okapi",path:"erm/resource/:{id}"},entitlementOptions:{type:"okapi",path:"erm/resource/:{id}/entitlementOptions",params:{stats:"true"},perRequest:function(e,t,r,n,o){return Object(y.g)(o.resources.settings,"entitlementOptions")},records:"results",limitParam:"perPage",throwErrors:!1,resultOffset:function(e,t,r,n,o){var i=o.match,s=o.resources,a=Object(c.get)(s,"entitlementOptionsOffset");return Object(c.get)(s,"eresource.records[0].id")!==i.params.id?0:a}},entitlements:{type:"okapi",path:"erm/resource/:{id}/entitlements",records:"results",perRequest:function(e,t,r,n,o){return Object(y.g)(o.resources.settings,"entitlements")},limitParam:"perPage",params:{stats:"true"},resultOffset:function(e,t,r,n,o){var i=o.match,s=o.resources,a=Object(c.get)(s,"entitlementsOffset");return Object(c.get)(s,"eresource.records[0].id")!==i.params.id?0:a}},relatedEntitlements:{type:"okapi",path:"erm/resource/:{id}/entitlements/related",perRequest:100,recordsRequired:"%{entitlementsCount}",limitParam:"perPage",throwErrors:!1},settings:{type:"okapi",path:"configurations/entries?query=(module=AGREEMENTS and configName=general)",records:"configs"},packageContents:{type:"okapi",path:"erm/packages/:{id}/content/%{packageContentsFilter}",records:"results",limitParam:"perPage",perRequest:function(e,t,r,n,o){var i;return Object(y.g)(null===(i=o.resources)||void 0===i?void 0:i.settings,"packageContents")},resultOffset:function(e,t,r,n,o){var i=o.match,s=o.resources,a=Object(c.get)(s,"packageContentsOffset");return Object(c.get)(s,"eresource.records[0].id")!==i.params.id?0:a},params:{filters:"pkg.id==:{id}",sort:"pti.titleInstance.name;asc",stats:"true"}},query:{},entitlementsOffset:{initialValue:0},entitlementsCount:{initialValue:X.h.INITIAL_RESULT_COUNT},entitlementOptionsOffset:{initialValue:0},packageContentsFilter:{initialValue:"current"},packageContentsOffset:{initialValue:0}}),de.propTypes={handlers:s.a.object,history:s.a.shape({push:s.a.func.isRequired}).isRequired,isSuppressFromDiscoveryEnabled:s.a.func.isRequired,location:s.a.shape({search:s.a.string.isRequired}).isRequired,match:s.a.shape({params:s.a.shape({id:s.a.string.isRequired}).isRequired}).isRequired,mutator:s.a.shape({entitlementsCount:s.a.shape({replace:s.a.func.isRequired}),entitlementsOffset:s.a.shape({replace:s.a.func.isRequired}),entitlementOptionsOffset:s.a.shape({replace:s.a.func.isRequired}),packageContentsCount:s.a.shape({replace:s.a.func.isRequired}),packageContentsOffset:s.a.shape({replace:s.a.func.isRequired}),packageContentsFilter:s.a.shape({replace:s.a.func.isRequired}),query:s.a.shape({update:s.a.func.isRequired}).isRequired}).isRequired,resources:s.a.shape({entitlementsCount:s.a.number,eresource:s.a.object,packageContents:s.a.shape({records:s.a.arrayOf(s.a.object)}),packageContentsFilter:s.a.string,packageContentsCount:s.a.number,query:s.a.object,settings:s.a.object}).isRequired,stripes:s.a.shape({hasPerm:s.a.func.isRequired}).isRequired,tagsEnabled:s.a.bool},de.defaultProps={handlers:{}};t.default=u()(l.o,y.j,p.U)(de)},2977:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(3),o=r.n(n),i=r(1),s=r.n(i),c=r(4),a=r(415);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,r,n,o=d(i);function i(){return l(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e,t,r,n=this.props.resource;if(Object(c.isEmpty)(n))return null;if(Object(a.f)(n)){var o=n.reference_object,i=(o=void 0===o?{}:o).titleCount,s=o.selectedCount;return i>=0?s>=0?"".concat(s," / ").concat(i):i:1}return n.titleCount&&n.titleCount>=0?(null==n?void 0:n.selectedCount)>=0?"".concat(n.selectedCount," / ").concat(n.titleCount):n.titleCount:null!==(e=null!==(t=n.resourceCount)&&void 0!==t?t:null===(r=n._object)||void 0===r?void 0:r.resourceCount)&&void 0!==e?e:1}}])&&p(t.prototype,r),n&&p(t,n),i}(o.a.Component);h.propTypes={resource:s.a.shape({_object:s.a.shape({resourceCount:s.a.number}),reference_object:s.a.shape({selectedCount:s.a.number,titleCount:s.a.number}),resourceCount:s.a.number,selectedCount:s.a.number,titleCount:s.a.number})}},2979:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(3),o=r.n(n),i=r(1),s=r.n(i);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,r,n,o=p(i);function i(){return a(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e,t,r,n,o,i,s,c,a=this.props.resource,u=null!==(e=a._object)&&void 0!==e?e:a;return null!==(t=null!==(r=null!==(n=null==u||null===(o=u.pkg)||void 0===o||null===(i=o.vendor)||void 0===i?void 0:i.name)&&void 0!==n?n:null==u||null===(s=u.vendor)||void 0===s?void 0:s.name)&&void 0!==r?r:null==u||null===(c=u.reference_object)||void 0===c?void 0:c.provider)&&void 0!==t?t:null}}])&&u(t.prototype,r),n&&u(t,n),i}(o.a.Component);b.propTypes={resource:s.a.shape({_object:s.a.shape({pkg:s.a.shape({vendor:s.a.shape({name:s.a.string})}),pti:s.a.shape({platform:s.a.shape({name:s.a.string})})}),reference_object:s.a.shape({provider:s.a.string})})}},2981:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(3);var n=r(1),o=r.n(n),i=r(29),s=r(2),c=r(0),a=function(e){var t,r=e.handlers.isSuppressFromDiscoveryEnabled,n=e.id,o=e.line,a=e.pci,u=e.title,l=r("agreementLine"),p=r("pci"),f=r("title");return o?t=function(){var e,t,r,n,a;return Object(c.jsxs)(s.sb,{children:[l&&Object(c.jsx)(s.k,{xs:3,children:Object(c.jsx)(s.J,{label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings.suppressFromDiscoveryAgreementLine",values:{breakingLine:Object(c.jsx)("br",{})}}),children:Object(c.jsx)("div",{children:Object(c.jsx)(i.a,{id:"ui-agreements.".concat(null!=o&&o.suppressFromDiscovery?"yes":"no")})})})}),p&&Object(c.jsx)(s.k,{xs:3,children:Object(c.jsx)(s.J,{label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings.suppressFromDiscoveryTitleInPackage",values:{breakingLine:Object(c.jsx)("br",{})}}),children:Object(c.jsx)("div",{children:Object(c.jsx)(i.a,{id:"ui-agreements.".concat(null!=o&&null!==(e=o.resource)&&void 0!==e&&e.suppressFromDiscovery?"yes":"no")})})})}),f&&Object(c.jsx)(s.k,{xs:3,children:Object(c.jsx)(s.J,{label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings.suppressFromDiscoveryTitle",values:{breakingLine:Object(c.jsx)("br",{})}}),children:Object(c.jsx)("div",{children:Object(c.jsx)(i.a,{id:"ui-agreements.".concat(null!=o&&null!==(t=o.resource)&&void 0!==t&&null!==(r=t._object)&&void 0!==r&&null!==(n=r.pti)&&void 0!==n&&null!==(a=n.titleInstance)&&void 0!==a&&a.suppressFromDiscovery?"yes":"no")})})})})]})}:a?t=function(){var e,t;return Object(c.jsxs)(s.sb,{children:[p&&Object(c.jsx)(s.k,{xs:3,children:Object(c.jsx)(s.J,{label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings.suppressFromDiscoveryTitleInPackage",values:{breakingLine:Object(c.jsx)("br",{})}}),children:Object(c.jsx)("div",{children:Object(c.jsx)(i.a,{id:"ui-agreements.".concat(null!=a&&a.suppressFromDiscovery?"yes":"no")})})})}),f&&Object(c.jsx)(s.k,{xs:3,children:Object(c.jsx)(s.J,{label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings.suppressFromDiscoveryTitle",values:{breakingLine:Object(c.jsx)("br",{})}}),children:Object(c.jsx)("div",{children:Object(c.jsx)(i.a,{id:"ui-agreements.".concat(null!=a&&null!==(e=a.pti)&&void 0!==e&&null!==(t=e.titleInstance)&&void 0!==t&&t.suppressFromDiscovery?"yes":"no")})})})})]})}:u&&(t=function(){var e;return Object(c.jsx)(s.J,{label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings.suppressFromDiscoveryTitle",values:{breakingLine:Object(c.jsx)("br",{})}}),children:Object(c.jsx)(i.a,{id:"ui-agreements.".concat(null!=u&&null!==(e=u.eresource)&&void 0!==e&&e.suppressFromDiscovery?"yes":"no")})})}),t?Object(c.jsx)(s.a,{id:n,label:Object(c.jsx)(i.a,{id:"ui-agreements.eresources.discoverySettings"}),children:t()}):null};a.propTypes={handlers:o.a.shape({isSuppressFromDiscoveryEnabled:o.a.func.isRequired}),id:o.a.string,line:o.a.object,pci:o.a.object,title:o.a.object};var u=a},2982:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));r(3);var n=r(1),o=r.n(n),i=r(29),s=r(2),c=r(7),a=r(2977),u=r(2974),l=r(2979),p=r(0),f={headerEnd:o.a.oneOfType([o.a.node,o.a.arrayOf(o.a.node)]),pkg:o.a.shape({name:o.a.string,resourceCount:o.a.number,vendor:o.a.shape({name:o.a.string}),source:o.a.string,reference:o.a.string}).isRequired,searchString:o.a.string},d=function(e){var t,r,n,o,f=e.headerEnd,d=e.pkg,b=void 0===d?{}:d,j=e.searchString,h=void 0===j?"":j,y=null!==(t=b._object)&&void 0!==t?t:b;return Object(p.jsxs)(s.i,{cardStyle:"positive",headerEnd:f,headerStart:Object(p.jsx)(c.b,{app:"agreements",iconKey:"eresource",size:"small",children:Object(p.jsx)("strong",{children:Object(p.jsx)(u.a,{eresource:b,searchString:h})})}),roundedBorder:!0,children:[Object(p.jsxs)(s.sb,{children:[Object(p.jsx)(s.k,{xs:3,children:Object(p.jsx)(s.J,{label:Object(p.jsx)(i.a,{id:"ui-agreements.eresources.publicationType"}),children:Object(p.jsx)(i.a,{id:"ui-agreements.eresources.package"})})}),Object(p.jsx)(s.k,{xs:3,children:Object(p.jsx)(s.J,{label:Object(p.jsx)(i.a,{id:"ui-agreements.eresources.count"}),children:Object(p.jsx)("div",{children:Object(p.jsx)(a.a,{resource:b})})})}),Object(p.jsx)(s.k,{xs:6,children:Object(p.jsx)(s.J,{label:Object(p.jsx)(i.a,{id:"ui-agreements.eresources.provider"}),children:Object(p.jsx)("div",{children:Object(p.jsx)(l.a,{resource:b})})})})]}),Object(p.jsxs)(s.sb,{children:[Object(p.jsx)(s.k,{xs:3,children:Object(p.jsx)(s.J,{label:Object(p.jsx)(i.a,{id:"ui-agreements.eresources.source"}),children:Object(p.jsx)("div",{children:null!==(r=null!==(n=null==y?void 0:y.source)&&void 0!==n?n:null==y?void 0:y.authority)&&void 0!==r?r:Object(p.jsx)(s.bb,{})})})}),Object(p.jsx)(s.k,{xs:9,children:Object(p.jsx)(s.J,{label:Object(p.jsx)(i.a,{id:"ui-agreements.eresources.reference"}),children:Object(p.jsx)("div",{children:null!==(o=null==y?void 0:y.reference)&&void 0!==o?o:Object(p.jsx)(s.bb,{})})})})]})]})};d.propTypes=f;var b=d},2983:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));r(3);var n=r(1),o=r.n(n),i=r(2),s=r(7),c=r(2978),a=r(2974),u=r(0),l={headerEnd:o.a.oneOfType([o.a.node,o.a.arrayOf(o.a.node)]),searchString:o.a.string,title:o.a.object},p=function(e){var t,r=e.headerEnd,n=e.searchString,o=void 0===n?"":n,l=e.title,p=null!==(t=l._object)&&void 0!==t?t:l;return Object(u.jsx)(i.i,{cardStyle:"positive",headerEnd:r,headerStart:Object(u.jsx)(s.b,{app:"agreements",iconKey:"eresource",size:"small",children:Object(u.jsx)("strong",{children:Object(u.jsx)(a.a,{eresource:l,searchString:o})})}),roundedBorder:!0,children:Object(u.jsx)(c.a,{title:p})})};p.propTypes=l;var f=p}}]);