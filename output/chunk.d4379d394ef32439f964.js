(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{2761:function(e,t,r){"use strict";r.r(t);var n=r(3),o=r.n(n),i=r(1),s=r.n(i),c=r(4),a=r(142),u=r.n(a),l=r(7),p=r(2),f=r(29),b=r(22),d=r(1391),j=r(3e3),h=r.n(j),m=r(2980),y=r(0);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(s,e);var t,r,n,i=w(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).getInitialAccordionsState=function(){return{pciFormCoverage:!0}},t.shortcuts=[{name:"save",handler:function(e){return Object(d.a)(e,t.props)}},{name:"expandAllSections",handler:function(e){return Object(p.Jb)(e,t.accordionStatusRef)}},{name:"collapseAllSections",handler:function(e){return Object(p.Eb)(e,t.accordionStatusRef)}}],t.accordionStatusRef=o.a.createRef(),t}return t=s,(r=[{key:"getSectionProps",value:function(e){var t=this.props,r=t.form,n=t.values;return{form:r,id:e,values:void 0===n?{}:n}}},{key:"renderPaneFooter",value:function(){var e=this.props,t=e.handlers,r=e.handleSubmit,n=e.pristine,o=e.submitting;return Object(y.jsx)(p.gb,{renderEnd:Object(y.jsx)(p.f,{buttonStyle:"primary mega",disabled:n||o,id:"clickable-update-pci",marginBottom0:!0,onClick:r,type:"submit",children:Object(y.jsx)(f.a,{id:"stripes-components.saveAndClose"})}),renderStart:Object(y.jsx)(p.f,{buttonStyle:"default mega",id:"clickable-cancel",marginBottom0:!0,onClick:t.onClose,children:Object(y.jsx)(f.a,{id:"stripes-components.cancel"})})})}},{key:"renderFirstMenu",value:function(){var e=this;return Object(y.jsx)(p.jb,{children:Object(y.jsx)(f.a,{id:"ui-agreements.pci.closeEdit",children:function(t){return Object(y.jsx)(p.H,{"aria-label":t,icon:"times",id:"close-pci-form-button",onClick:e.props.handlers.onClose})}})})}},{key:"render",value:function(){var e=this.props,t=e.form,r=e.handlers.isSuppressFromDiscoveryEnabled,n=e.values.name,o=t.getRegisteredFields().length>0;return Object(y.jsx)(p.C,{commands:this.shortcuts,isWithinScope:p.Db,scope:document.body,children:Object(y.jsx)(p.kb,{children:Object(y.jsx)(p.db,{centerContent:!0,defaultWidth:"100%",firstMenu:this.renderFirstMenu(),footer:this.renderPaneFooter(),id:"pane-pci-form",paneTitle:Object(y.jsx)(f.a,{id:"ui-agreements.editResource",values:{name:n}}),children:Object(y.jsx)(l.k,{record:n,children:Object(y.jsxs)("form",{id:"form-pci",children:[Object(y.jsx)(m.e,{isSuppressFromDiscoveryEnabled:r}),Object(y.jsxs)(p.c,{ref:this.accordionStatusRef,children:[o?Object(y.jsx)("div",{id:"form-loaded"}):null,Object(y.jsx)(p.sb,{end:"xs",children:Object(y.jsx)(p.k,{xs:!0,children:Object(y.jsx)(p.v,{})})}),Object(y.jsxs)(p.b,{initialStatus:this.getInitialAccordionsState(),children:[Object(y.jsx)("div",{className:h.a.separator}),Object(y.jsx)(m.d,g({},this.getSectionProps("pciFormCoverage")))]})]})]})})})})})}}])&&S(t.prototype,r),n&&S(t,n),s}(o.a.Component);k.propTypes={form:s.a.shape({getRegisteredFields:s.a.func.isRequired}).isRequired,handlers:s.a.PropTypes.shape({isSuppressFromDiscoveryEnabled:s.a.func.isRequired,onClose:s.a.func.isRequired}),initialValues:s.a.object,handleSubmit:s.a.func.isRequired,pristine:s.a.bool,submitting:s.a.bool,values:s.a.object},k.defaultProps={initialValues:{}};var D=Object(b.a)({initialValuesEqual:function(e,t){return Object(c.isEqual)(e,t)},keepDirtyOnReinitialize:!0,subscription:{values:!0},navigationCheck:!0})(k),C=r(2978),q=r(8),F=function(e){var t=e.isSuppressFromDiscoveryEnabled;return Object(y.jsx)("div",{children:Object(y.jsx)(p.sb,{children:t("title")?Object(y.jsx)(p.k,{xs:3,children:Object(y.jsx)(q.a,{component:p.j,id:"title-suppress-from-discovery",label:Object(y.jsx)(f.a,{id:"ui-agreements.eresources.suppressFromDiscovery"}),name:"suppressFromDiscovery",type:"checkbox",vertical:!0})}):null})})};F.propTypes={isSuppressFromDiscoveryEnabled:s.a.func.isRequired};var T=F,_=r(2976),I=r.n(_);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){var t=e.eresource,r=e.form,n=e.handlers,o=e.handleSubmit,i=e.pristine,s=e.submitting,c=e.values,a=function(){return{form:r,isSuppressFromDiscoveryEnabled:n.isSuppressFromDiscoveryEnabled,name:c.name,title:t,values:c}},u=[{name:"save",handler:function(e){return Object(d.a)(e,{handleSubmit:o,pristine:i,submitting:s})}}];return Object(y.jsx)(p.C,{commands:u,isWithinScope:p.Db,scope:document.body,children:Object(y.jsx)(p.kb,{children:Object(y.jsx)(p.db,{appIcon:Object(y.jsx)(l.b,{app:"agreements",iconKey:"eresource"}),defaultWidth:"100%",firstMenu:Object(y.jsx)(p.jb,{children:Object(y.jsx)(f.a,{id:"ui-agreements.title.closeEdit",children:function(e){return Object(y.jsx)(p.H,{"aria-label":e,icon:"times",id:"close-title-form-button",onClick:n.onClose})}})}),footer:Object(y.jsx)(p.gb,{renderEnd:Object(y.jsx)(p.f,{buttonStyle:"primary mega",disabled:i||s,id:"clickable-update-title",marginBottom0:!0,onClick:o,type:"submit",children:Object(y.jsx)(f.a,{id:"stripes-components.saveAndClose"})}),renderStart:Object(y.jsx)(p.f,{buttonStyle:"default mega",id:"clickable-cancel",marginBottom0:!0,onClick:n.onClose,children:Object(y.jsx)(f.a,{id:"stripes-components.cancel"})})}),id:"pane-title-form",paneTitle:Object(y.jsx)(f.a,{id:"ui-agreements.editResource",values:{name:c.name}}),children:Object(y.jsx)(l.k,{record:c.name,children:Object(y.jsxs)("form",{id:"form-title",children:[Object(y.jsx)(C.a,A({},a())),Object(y.jsx)("div",{className:I.a.separator}),Object(y.jsx)(T,A({},a()))]})})})})})};N.propTypes={eresource:s.a.object,form:s.a.object.isRequired,handlers:s.a.PropTypes.shape({isSuppressFromDiscoveryEnabled:s.a.func.isRequired,onClose:s.a.func.isRequired}),initialValues:s.a.object,handleSubmit:s.a.func.isRequired,pristine:s.a.bool,submitting:s.a.bool,values:s.a.object};var M=Object(b.a)({initialValuesEqual:function(e,t){return Object(c.isEqual)(e,t)},keepDirtyOnReinitialize:!0,subscription:{values:!0},navigationCheck:!0})(N),U=r(2973),W=r(415),z=r(416);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Z(e);if(t){var o=Z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}function Y(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(i,e);var t,r,n,o=X(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getInitialValues=function(){var e,r,n,o=t.props.resources,i=null!==(e=null==o||null===(r=o.eresource)||void 0===r||null===(n=r.records)||void 0===n?void 0:n[0])&&void 0!==e?e:{};return Object(c.cloneDeep)(i)},t.handleClose=function(){var e=t.props,r=e.location,n=e.match;t.props.history.push("".concat(W.h.eresourceView(n.params.id)).concat(r.search))},t.handleSubmit=function(e){var r=t.props,n=r.history,o=r.location,i=r.mutator,s=e.coverage,c=e.id,a=e.suppressFromDiscovery;return(null==e?void 0:e.class)===z.f.TITLEINSTANCE?i.title.PUT({id:c,suppressFromDiscovery:a}).then((function(){n.push("".concat(W.h.eresourceView(c)).concat(o.search))})):i.pci.PUT({id:c,coverage:s,suppressFromDiscovery:a}).then((function(){n.push("".concat(W.h.eresourceView(c)).concat(o.search))}))},t.fetchIsPending=function(){return Object.values(t.props.resources).filter((function(e){return e&&"pci"!==e.eresource})).some((function(e){return e.isPending}))},t.state={hasPerms:e.stripes.hasPerm("ui-agreements.resources.edit")},t}return t=i,(r=[{key:"render",value:function(){var e,t;if(!this.state.hasPerms)return Object(y.jsx)(U.a,{});if(this.fetchIsPending())return Object(y.jsx)(p.R,{dismissible:!0,onClose:this.handleClose});var r=this.props.isSuppressFromDiscoveryEnabled,n=null===(e=this.props.resources)||void 0===e||null===(t=e.eresource)||void 0===t?void 0:t.records[0],o=(null==n?void 0:n.class)===z.f.TITLEINSTANCE?M:D;return Object(y.jsx)(o,{eresource:n,handlers:L(L({},this.props.handlers),{},{isSuppressFromDiscoveryEnabled:r,onClose:this.handleClose}),initialValues:this.getInitialValues(),onSubmit:this.handleSubmit})}}])&&Q(t.prototype,r),n&&Q(t,n),i}(o.a.Component);$.manifest=Object.freeze({eresource:{type:"okapi",path:"erm/resource/:{id}",shouldRefresh:function(){return!1}},pci:{type:"okapi",path:"erm/pci/:{id}",fetch:!1},title:{type:"okapi",path:"erm/titles/:{id}",fetch:!1}}),$.propTypes={handlers:s.a.object,history:s.a.shape({push:s.a.func.isRequired}).isRequired,isSuppressFromDiscoveryEnabled:s.a.func.isRequired,location:s.a.shape({search:s.a.string.isRequired}).isRequired,match:s.a.shape({params:s.a.shape({id:s.a.string.isRequired}).isRequired}).isRequired,mutator:s.a.shape({pci:s.a.shape({PUT:s.a.func.isRequired}),title:s.a.shape({PUT:s.a.func.isRequired})}).isRequired,resources:s.a.shape({eresource:s.a.object,settings:s.a.object}).isRequired,stripes:s.a.shape({hasPerm:s.a.func.isRequired}).isRequired};t.default=u()(l.o,W.j)($)},2973:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(3);var n=r(29),o=r(2),i=r(0),s=function(){return Object(i.jsxs)(o.M,{className:"textCentered",children:[Object(i.jsx)("h2",{children:Object(i.jsx)(n.a,{id:"stripes-smart-components.permissionError"})}),Object(i.jsx)("p",{children:Object(i.jsx)(n.a,{id:"stripes-smart-components.permissionsDoNotAllowAccess"})})]})}},3e3:function(e,t,r){e.exports={separator:"separator---B8RQ8"}}}]);